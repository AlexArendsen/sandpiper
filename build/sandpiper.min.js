function showMessage(a,b){Materialize.toast(a,b||4e3)}var app=angular.module("sandpiper",[]);$(document).ready(function(){$(".button-collapse").sideNav()}),app.controller("DashCtrl",["$scope","files",function(a,b){b.dump(function(b){a.results=b},function(b){a.error=b})}]),app.factory("files",["$http","fileUtils",function(a,b){return{dump:function(c,d){d=d||function(){},a.get("dump.php").success(function(a,e){if(a.success){for(idx in a.payload)inf=b.getPathInfo(a.payload[idx].file,"UNKOWN"),a.payload[idx].type=inf.extension.toUpperCase(),a.payload[idx].image=inf.image;c(a.payload)}else d(a.error)}).error(function(a,b){d(a.error)})},getFile:function(b,c,d){d=d||function(){},a.get("getFile.php?fileId="+b).success(function(a,b){a.success?c(a.fileInfo):d(a.error)}).error(function(a,b){d(a.error)})}}}]),app.controller("EditorCtrl",["$scope","files",function(a,b){a.editor={title:"Loading...",submitlabel:"...",continuelabel:"..."},a.file={},(id=$("#file-id").val())?(a.file.isNew=!1,a.file.action="update",$("#file-action").val("update"),b.getFile(id,function(b){a.file=b,a.file.tags=a.file.tags.join(","),a.editor.title="Update "+a.file.title,a.editor.submitlabel="Update",a.editor.continuelabel="Update and Add Another"})):(a.file.isNew=!0,a.file.action="insert",$("#file-action").val("insert"),a.editor.title="Add New File",a.editor.submitlabel="Create",a.editor.continuelabel="Create and Add Another"),a.onFileChange=function(){a.file.title||(a.file.title=a.file.path)}}]),app.factory("fileUtils",[function(){var a={getExtension:function(a,b){return a&&(mat=a.match(/\.(.+)$/))&&mat[1]?mat[1]:b},getPathInfo:function(b,c){return extension=a.getExtension(b,c).toLowerCase(),image="static/img/filetypes/_blank.png",-1!=extension.search(/png|jpg|jpeg|gif|bmp/)?image="authorize.php?file="+b:-1!=["aac","aiff","ai","avi","bmp","c","cpp","css","dat","def","dmg","doc","dotx","dwg","dxf","eps","exe","flv","gif","h","hpp","html","ics","iso","java","jpg","js","key","less","mid","mp3","mp4","mpg","odf","ods","odt","otp","ots","ott","pdf","php","png","ppt","psd","py","qt","rar","rb","rtf","sass","scss","sql","tga","tgz","tiff","txt","wav","xls","xlsx","xml","yml","zip"].indexOf(extension)&&(image="static/img/filetypes/"+extension+".png"),{extension:extension,image:image}}};return a}]);